On April 12 , 1927 , as the Kuomintang armies of Chiang Kai - shek approached Shanghai , their allies carried out a massacre of Communists and workers .