In June , the Egyptian government broke diplomatic ties with the United States , requiring any Americans wishing to stay in the county to apply for a special visa .