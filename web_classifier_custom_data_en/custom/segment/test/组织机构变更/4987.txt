The liberal Cortes passed the Spanish Constitution of 1812 , which established a constitutional monarchy and eliminated many basic institutions that privileged some groups over others .